Title: Ensure org ID is loaded, guard Jobs page, and update user membership
Instructions:

Guard the Jobs page until currentOrgId loads.

Open client/src/pages/Jobs.tsx.

Import useAuth from @/contexts/AuthContext.

At the start of the JobsPage component, read const { currentOrgId } = useAuth().

If !currentOrgId, return a simple <div className="p-4 text-sm text-muted-foreground">Loading organization…</div> before calling any queries.

Keep the existing error and isLoading handling below that guard.

Always pass orgId in job mutations.

In client/src/hooks/useJobMutation.ts, update the hooks:

useJobsQuery: fetch /api/jobs?orgId=${encodeURIComponent(currentOrgId)} only when currentOrgId is truthy (enabled: !!currentOrgId).

useCreateJob: throw an error if currentOrgId is falsy, then call fetch('/api/jobs', { method:'POST', headers:{ 'Content-Type': 'application/json', 'x-org-id': currentOrgId }, body: JSON.stringify({ ...payload, orgId: currentOrgId })}).

usePublishJob: throw an error if currentOrgId is falsy, then call fetch('/api/jobs/${jobId}/publish', { method:'POST', headers: { 'x-org-id': currentOrgId }}).

Remove any assumptions that orgId might come from form values—the hook should inject it automatically.

Ensure the New Job dialog doesn’t proceed without org context.

In client/src/components/dialogs/PostJobDialog.tsx, use the createJob hook as-is; it will now error if currentOrgId is undefined.

New user membership check.

When creating or logging in a new user, confirm in your server code that they have a row in public.user_organizations for the selected org. If not, you can either prevent job creation or automatically insert them (see the SQL script below for how to insert).

Lint and test.

Run npm run lint and npm run dev to ensure there are no TypeScript errors.

Create a new user, join an organization, and verify that the Jobs page waits until the organization loads and that draft creation succeeds.

Commit and push.

Create a branch named fix/org-id-guard-and-membership and commit your changes.

Open a pull request with a summary of what was done.

